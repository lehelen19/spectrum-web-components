{"version":3,"file":"swc.DkNQbEX1.js","sources":["../../../packages/overlay/src/InteractionController.js","../../../packages/overlay/src/AbstractOverlay.js","../../../packages/overlay/src/overlay-timer.js","../../../tools/shared/src/reparent-children.js","../../../packages/overlay/src/LongpressController.js","../../../packages/overlay/src/strategies.js","../../../packages/overlay/src/ClickController.js","../../../packages/overlay/src/HoverController.js"],"sourcesContent":["\"use strict\";export var InteractionTypes=(r=>(r[r.click=0]=\"click\",r[r.hover=1]=\"hover\",r[r.longpress=2]=\"longpress\",r))(InteractionTypes||{});export class InteractionController{constructor(e,{overlay:t,isPersistent:r,handleOverlayReady:i}){this.target=e;this.isLazilyOpen=!1;this.isPersistent=!1;this.isPersistent=!!r,this.handleOverlayReady=i,this.isPersistent&&this.init(),this.overlay=t}get activelyOpening(){return!1}get open(){var e,t;return(t=(e=this.overlay)==null?void 0:e.open)!=null?t:this.isLazilyOpen}set open(e){if(e!==this.open){if(this.isLazilyOpen=e,this.overlay){this.overlay.open=e;return}e&&(customElements.whenDefined(\"sp-overlay\").then(async()=>{const{Overlay:t}=await import(\"./Overlay.js\");this.overlay=new t,this.overlay.open=!0}),import(\"@spectrum-web-components/overlay/sp-overlay.js\"))}}get overlay(){return this._overlay}set overlay(e){var t;e&&this.overlay!==e&&(this.overlay&&this.overlay.removeController(this),this._overlay=e,this.overlay.addController(this),this.initOverlay(),this.prepareDescription(this.target),(t=this.handleOverlayReady)==null||t.call(this,this.overlay))}prepareDescription(e){}releaseDescription(){}shouldCompleteOpen(){}init(){}initOverlay(){}abort(){var e;this.releaseDescription(),(e=this.abortController)==null||e.abort()}hostConnected(){this.init()}hostDisconnected(){this.isPersistent||this.abort()}}\n//# sourceMappingURL=InteractionController.js.map\n","\"use strict\";import{SpectrumElement as g}from\"@spectrum-web-components/base\";import{reparentChildren as b}from\"@spectrum-web-components/shared/src/reparent-children.js\";import{OverlayTimer as O}from\"./overlay-timer.js\";export const overlayTimer=new O,noop=()=>{},guaranteedAllTransitionend=(i,v,e)=>{const r=new AbortController,n=new Map,a=()=>{r.abort(),e()};let m,l;const t=requestAnimationFrame(()=>{m=requestAnimationFrame(()=>{l=requestAnimationFrame(()=>{a()})})}),p=o=>{o.target===i&&(n.set(o.propertyName,n.get(o.propertyName)-1),n.get(o.propertyName)||n.delete(o.propertyName),n.size===0&&a())},d=o=>{o.target===i&&(n.has(o.propertyName)||n.set(o.propertyName,0),n.set(o.propertyName,n.get(o.propertyName)+1),cancelAnimationFrame(t),cancelAnimationFrame(m),cancelAnimationFrame(l))};i.addEventListener(\"transitionrun\",d,{signal:r.signal}),i.addEventListener(\"transitionend\",p,{signal:r.signal}),i.addEventListener(\"transitioncancel\",p,{signal:r.signal}),v()};export function nextFrame(){return new Promise(i=>requestAnimationFrame(()=>i()))}export class AbstractOverlay extends g{constructor(){super(...arguments);this.dispose=noop;this.offset=0;this.willPreventClose=!1}async applyFocus(e,r){}get delayed(){return!1}set delayed(e){}get disabled(){return!1}set disabled(e){}get elementResolver(){return this._elementResolver}set elementResolver(e){this._elementResolver=e}async ensureOnDOM(e){}async makeTransition(e){return null}async manageDelay(e){}async manageDialogOpen(){}async managePopoverOpen(){}managePosition(){}get open(){return!1}set open(e){}get placementController(){return this._placementController}set placementController(e){this._placementController=e}requestSlottable(){}returnFocus(){}get state(){return\"closed\"}set state(e){}manuallyKeepOpen(){}static update(){const e=new CustomEvent(\"sp-update-overlays\",{bubbles:!0,composed:!0,cancelable:!0});document.dispatchEvent(e)}static async open(e,r,n,a){await import(\"@spectrum-web-components/overlay/sp-overlay.js\");const m=arguments.length===2,l=n||e,t=new this;let p=!1;t.dispose=()=>{t.addEventListener(\"sp-closed\",()=>{p||(d(),p=!0),requestAnimationFrame(()=>{t.remove()})}),t.open=!1,t.dispose=noop};const d=b([l],t,{position:\"beforeend\",prepareCallback:s=>{const c=s.slot;return s.removeAttribute(\"slot\"),()=>{s.slot=c}}});if(!m&&l&&a){const s=e,c=r,u=a;return AbstractOverlay.applyOptions(t,{...u,delayed:u.delayed||l.hasAttribute(\"delayed\"),trigger:u.virtualTrigger||s,type:c===\"modal\"?\"modal\":c===\"hover\"?\"hint\":\"auto\"}),s.insertAdjacentElement(\"afterend\",t),await t.updateComplete,t.open=!0,t.dispose}const y=r;return t.append(l),AbstractOverlay.applyOptions(t,{...y,delayed:y.delayed||l.hasAttribute(\"delayed\")}),t.updateComplete.then(()=>{t.open=!0}),t}static applyOptions(e,r){var n,a;e.delayed=!!r.delayed,e.receivesFocus=(n=r.receivesFocus)!=null?n:\"auto\",e.triggerElement=r.trigger||null,e.type=r.type||\"modal\",e.offset=(a=r.offset)!=null?a:0,e.placement=r.placement,e.willPreventClose=!!r.notImmediatelyClosable}}\n//# sourceMappingURL=AbstractOverlay.js.map\n","\"use strict\";const t=1e3,s=1e3;export class OverlayTimer{constructor(e={}){this.warmUpDelay=1e3;this.coolDownDelay=1e3;this.isWarm=!1;this.timeout=0;Object.assign(this,e)}async openTimer(e){if(this.cancelCooldownTimer(),!this.component||e!==this.component)return this.component&&(this.close(this.component),this.cancelCooldownTimer()),this.component=e,this.isWarm?!1:(this.promise=new Promise(o=>{this.resolve=o,this.timeout=window.setTimeout(()=>{this.resolve&&(this.resolve(!1),this.isWarm=!0)},this.warmUpDelay)}),this.promise);if(this.promise)return this.promise;throw new Error(\"Inconsistent state\")}close(e){this.component&&this.component===e&&(this.resetCooldownTimer(),this.timeout>0&&(clearTimeout(this.timeout),this.timeout=0),this.resolve&&(this.resolve(!0),delete this.resolve),delete this.promise,delete this.component)}resetCooldownTimer(){this.isWarm&&(this.cooldownTimeout&&window.clearTimeout(this.cooldownTimeout),this.cooldownTimeout=window.setTimeout(()=>{this.isWarm=!1,delete this.cooldownTimeout},this.coolDownDelay))}cancelCooldownTimer(){this.cooldownTimeout&&window.clearTimeout(this.cooldownTimeout),delete this.cooldownTimeout}}\n//# sourceMappingURL=overlay-timer.js.map\n","\"use strict\";function T(o,i,l=[]){for(let e=0;e<i.length;++e){const n=i[e],r=o[e],t=r.parentElement||r.getRootNode();l[e]&&l[e](n),t&&t!==r&&t.replaceChild(n,r),delete o[e]}return i}export const reparentChildren=(o,i,{position:l,prepareCallback:e}={position:\"beforeend\"})=>{let{length:n}=o;if(n===0)return()=>o;let r=1,t=0;(l===\"afterbegin\"||l===\"afterend\")&&(r=-1,t=n-1);const a=new Array(n),c=new Array(n),p=document.createComment(\"placeholder for reparented element\");do{const d=o[t];e&&(c[t]=e(d)),a[t]=p.cloneNode();const m=d.parentElement||d.getRootNode();m&&m!==d&&m.replaceChild(a[t],d),i.insertAdjacentElement(l,d),t+=r}while(--n>0);return function(){return T(a,o,c)}};\n//# sourceMappingURL=reparent-children.js.map\n","\"use strict\";import{isAndroid as a,isIOS as d}from\"@spectrum-web-components/shared/src/platform.js\";import{conditionAttributeWithId as p}from\"@spectrum-web-components/base/src/condition-attribute-with-id.js\";import{randomID as l}from\"@spectrum-web-components/shared/src/random-id.js\";import{noop as r}from\"./AbstractOverlay.js\";import{InteractionController as h,InteractionTypes as c}from\"./InteractionController.js\";const g=300;export const LONGPRESS_INSTRUCTIONS={touch:\"Double tap and long press for additional options\",keyboard:\"Press Space or Alt+Down Arrow for additional options\",mouse:\"Click and hold for additional options\"};export class LongpressController extends h{constructor(){super(...arguments);this.type=c.longpress;this.longpressState=null;this.releaseDescription=r;this.handlePointerup=()=>{var e;clearTimeout(this.timeout),this.target&&(this.longpressState=((e=this.overlay)==null?void 0:e.state)===\"opening\"?\"pressed\":null,document.removeEventListener(\"pointerup\",this.handlePointerup),document.removeEventListener(\"pointercancel\",this.handlePointerup))}}get activelyOpening(){return this.longpressState===\"opening\"||this.longpressState===\"pressed\"}handleLongpress(){this.open=!0,this.longpressState=this.longpressState===\"potential\"?\"opening\":\"pressed\"}handlePointerdown(e){!this.target||e.button!==0||(this.longpressState=\"potential\",document.addEventListener(\"pointerup\",this.handlePointerup),document.addEventListener(\"pointercancel\",this.handlePointerup),\"holdAffordance\"in this.target)||(this.timeout=setTimeout(()=>{this.target&&this.target.dispatchEvent(new CustomEvent(\"longpress\",{bubbles:!0,composed:!0,detail:{source:\"pointer\"}}))},g))}handleKeydown(e){const{code:t,altKey:o}=e;o&&t===\"ArrowDown\"&&(e.stopPropagation(),e.stopImmediatePropagation())}handleKeyup(e){const{code:t,altKey:o}=e;if(t===\"Space\"||o&&t===\"ArrowDown\"){if(!this.target)return;e.stopPropagation(),this.target.dispatchEvent(new CustomEvent(\"longpress\",{bubbles:!0,composed:!0,detail:{source:\"keyboard\"}})),setTimeout(()=>{this.longpressState=null})}}prepareDescription(e){if(this.releaseDescription!==r||!this.overlay.elements.length)return;const t=document.createElement(\"div\");t.id=`longpress-describedby-descriptor-${l()}`;const o=d()||a()?\"touch\":\"keyboard\";t.textContent=LONGPRESS_INSTRUCTIONS[o],t.slot=\"longpress-describedby-descriptor\";const n=e.getRootNode(),s=this.overlay.getRootNode();n===s?this.overlay.append(t):(t.hidden=!(\"host\"in n),e.insertAdjacentElement(\"afterend\",t));const i=p(e,\"aria-describedby\",[t.id]);this.releaseDescription=()=>{i(),t.remove(),this.releaseDescription=r}}shouldCompleteOpen(){this.longpressState=this.longpressState===\"pressed\"?null:this.longpressState}init(){var t;(t=this.abortController)==null||t.abort(),this.abortController=new AbortController;const{signal:e}=this.abortController;this.target.addEventListener(\"longpress\",()=>this.handleLongpress(),{signal:e}),this.target.addEventListener(\"pointerdown\",o=>this.handlePointerdown(o),{signal:e}),this.prepareDescription(this.target),!this.target.holdAffordance&&(this.target.addEventListener(\"keydown\",o=>this.handleKeydown(o),{signal:e}),this.target.addEventListener(\"keyup\",o=>this.handleKeyup(o),{signal:e}))}}\n//# sourceMappingURL=LongpressController.js.map\n","\"use strict\";import{ClickController as o}from\"./ClickController.js\";import{HoverController as r}from\"./HoverController.js\";import{LongpressController as e}from\"./LongpressController.js\";export const strategies={click:o,longpress:e,hover:r};\n//# sourceMappingURL=strategies.js.map\n","\"use strict\";import{InteractionController as o,InteractionTypes as r}from\"./InteractionController.js\";export class ClickController extends o{constructor(){super(...arguments);this.type=r.click;this.preventNextToggle=!1}handleClick(){this.preventNextToggle||(this.open=!this.open),this.preventNextToggle=!1}handlePointerdown(){this.preventNextToggle=this.open}init(){var t;(t=this.abortController)==null||t.abort(),this.abortController=new AbortController;const{signal:e}=this.abortController;this.target.addEventListener(\"click\",()=>this.handleClick(),{signal:e}),this.target.addEventListener(\"pointerdown\",()=>this.handlePointerdown(),{signal:e})}}\n//# sourceMappingURL=ClickController.js.map\n","\"use strict\";import{conditionAttributeWithId as o}from\"@spectrum-web-components/base/src/condition-attribute-with-id.js\";import{randomID as a}from\"@spectrum-web-components/shared/src/random-id.js\";import{InteractionController as l,InteractionTypes as h}from\"./InteractionController.js\";import{noop as s}from\"./AbstractOverlay.js\";const d=300;export class HoverController extends l{constructor(){super(...arguments);this.type=h.hover;this.elementIds=[];this.focusedin=!1;this.pointerentered=!1}handleTargetFocusin(){this.target.matches(\":focus-visible\")&&(this.open=!0,this.focusedin=!0)}handleTargetFocusout(){this.focusedin=!1,!this.pointerentered&&(this.open=!1)}handleTargetPointerenter(){var e;this.hoverTimeout&&(clearTimeout(this.hoverTimeout),this.hoverTimeout=void 0),!((e=this.overlay)!=null&&e.disabled)&&(this.open=!0,this.pointerentered=!0)}handleTargetPointerleave(){this.doPointerleave()}handleHostPointerenter(){this.hoverTimeout&&(clearTimeout(this.hoverTimeout),this.hoverTimeout=void 0)}handleHostPointerleave(){this.doPointerleave()}prepareDescription(){if(!this.overlay.elements.length)return;const e=this.target.getRootNode(),t=this.overlay.elements[0].getRootNode(),r=this.overlay.getRootNode();e===r?this.prepareOverlayRelativeDescription():e===t&&this.prepareContentRelativeDescription()}prepareOverlayRelativeDescription(){const e=o(this.target,\"aria-describedby\",[this.overlay.id]);this.releaseDescription=()=>{e(),this.releaseDescription=s}}prepareContentRelativeDescription(){const e=[],t=this.overlay.elements.map(i=>(e.push(i.id),i.id||(i.id=`${this.overlay.tagName.toLowerCase()}-helper-${a()}`),i.id));this.elementIds=e;const r=o(this.target,\"aria-describedby\",t);this.releaseDescription=()=>{r(),this.overlay.elements.map((i,n)=>{i.id=this.elementIds[n]}),this.releaseDescription=s}}doPointerleave(){this.pointerentered=!1;const e=this.target;this.focusedin&&e.matches(\":focus-visible\")||(this.hoverTimeout=setTimeout(()=>{this.open=!1},d))}init(){var t;(t=this.abortController)==null||t.abort(),this.abortController=new AbortController;const{signal:e}=this.abortController;this.target.addEventListener(\"focusin\",()=>this.handleTargetFocusin(),{signal:e}),this.target.addEventListener(\"focusout\",()=>this.handleTargetFocusout(),{signal:e}),this.target.addEventListener(\"pointerenter\",()=>this.handleTargetPointerenter(),{signal:e}),this.target.addEventListener(\"pointerleave\",()=>this.handleTargetPointerleave(),{signal:e}),this.overlay&&this.initOverlay()}initOverlay(){if(!this.abortController)return;const{signal:e}=this.abortController;this.overlay.addEventListener(\"pointerenter\",()=>this.handleHostPointerenter(),{signal:e}),this.overlay.addEventListener(\"pointerleave\",()=>this.handleHostPointerleave(),{signal:e})}}\n//# sourceMappingURL=HoverController.js.map\n"],"names":["r","InteractionTypes","click","hover","longpress","InteractionController","constructor","e","overlay","t","isPersistent","handleOverlayReady","i","this","target","isLazilyOpen","init","activelyOpening","open","customElements","whenDefined","then","async","Overlay","import","n","a","_overlay","removeController","addController","initOverlay","prepareDescription","call","releaseDescription","shouldCompleteOpen","abort","abortController","hostConnected","hostDisconnected","overlayTimer","warmUpDelay","coolDownDelay","isWarm","timeout","Object","assign","openTimer","cancelCooldownTimer","component","close","promise","Promise","o","resolve","window","setTimeout","Error","resetCooldownTimer","clearTimeout","cooldownTimeout","noop","guaranteedAllTransitionend","v","AbortController","Map","cleanup","m","l","requestAnimationFrame","p","set","propertyName","get","delete","size","addEventListener","has","cancelAnimationFrame","signal","nextFrame","AbstractOverlay","g","arguments","dispose","offset","willPreventClose","applyFocus","delayed","disabled","elementResolver","_elementResolver","ensureOnDOM","makeTransition","manageDelay","manageDialogOpen","managePopoverOpen","managePosition","placementController","_placementController","requestSlottable","returnFocus","state","manuallyKeepOpen","update","CustomEvent","bubbles","composed","cancelable","document","dispatchEvent","length","d","remove","reparentChildren","position","prepareCallback","Array","c","createComment","cloneNode","parentElement","getRootNode","replaceChild","insertAdjacentElement","T","b","s","slot","removeAttribute","u","applyOptions","hasAttribute","trigger","virtualTrigger","type","updateComplete","y","append","receivesFocus","triggerElement","placement","notImmediatelyClosable","LONGPRESS_INSTRUCTIONS","touch","keyboard","mouse","strategies","preventNextToggle","handleClick","handlePointerdown","h","super","longpressState","handlePointerup","removeEventListener","handleLongpress","button","detail","source","handleKeydown","code","altKey","stopPropagation","stopImmediatePropagation","handleKeyup","elements","createElement","id","textContent","hidden","holdAffordance","elementIds","focusedin","pointerentered","handleTargetFocusin","matches","handleTargetFocusout","handleTargetPointerenter","hoverTimeout","handleTargetPointerleave","doPointerleave","handleHostPointerenter","handleHostPointerleave","prepareOverlayRelativeDescription","prepareContentRelativeDescription","map","push","tagName","toLowerCase"],"mappings":"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"}